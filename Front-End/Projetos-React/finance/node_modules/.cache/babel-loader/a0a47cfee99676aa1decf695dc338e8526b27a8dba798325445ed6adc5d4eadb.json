{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useState,useContext}from'react';import{api}from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";var TransactionsContext=/*#__PURE__*/createContext({});export function TransactionsProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];useEffect(function(){api.get('transactions').then(function(response){return setTransactions(response.data.transactions);});},[]);function createTransaction(_x){return _createTransaction.apply(this,arguments);}function _createTransaction(){_createTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(transactionInput){var response,transaction;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.post('/transactions',_objectSpread(_objectSpread({},transactionInput),{},{createdAt:new Date()}));case 2:response=_context.sent;transaction=response.data.transaction;setTransactions([].concat(_toConsumableArray(transactions),[transaction]));case 5:case\"end\":return _context.stop();}},_callee);}));return _createTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(TransactionsContext.Provider,{value:{transactions:transactions,createTransaction:createTransaction},children:children});}export function useTransactions(){var context=useContext(TransactionsContext);return context;}","map":{"version":3,"names":["createContext","useEffect","useState","useContext","api","jsx","_jsx","TransactionsContext","TransactionsProvider","_ref","children","_useState","_useState2","_slicedToArray","transactions","setTransactions","get","then","response","data","createTransaction","_x","_createTransaction","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","transactionInput","transaction","wrap","_callee$","_context","prev","next","post","_objectSpread","createdAt","Date","sent","concat","_toConsumableArray","stop","Provider","value","useTransactions","context"],"sources":["C:/Users/Miguelzinho/Documents/Desenvolvedor/Projeto/Curso-Web-Full-Stack/Front-End/Projetos-React/finance/src/hooks/useTransactions.tsx"],"sourcesContent":["import { createContext, useEffect, useState, ReactNode, useContext } from 'react';\r\nimport { api } from '../services/api';\r\n\r\n\r\ninterface Transaction {\r\n    id: number;\r\n    title: string;\r\n    amount: number;\r\n    type: string;\r\n    category: string;\r\n    createdAt: string;\r\n}\r\n\r\ntype TransactionInput = Omit<Transaction, 'id' | 'createdAt'>;\r\n\r\ninterface TransactionsProviderProps {\r\n    children: ReactNode;\r\n}\r\n\r\ninterface TransactionsContextData {\r\n    transactions: Transaction[];\r\n    createTransaction: (transaction: TransactionInput) => Promise<void>;\r\n}\r\n\r\nconst TransactionsContext = createContext<TransactionsContextData>(\r\n        {} as TransactionsContextData\r\n    );\r\n\r\nexport function TransactionsProvider({ children }: TransactionsProviderProps) {\r\n    const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n\r\n    useEffect(() => {\r\n        api.get('transactions')\r\n        .then(response => setTransactions(response.data.transactions))\r\n    }, []);\r\n\r\n    async function createTransaction(transactionInput: TransactionInput) {        \r\n        const response = await api.post('/transactions', {\r\n            ...transactionInput,\r\n            createdAt:new Date(),\r\n        })\r\n\r\n        const { transaction } = response.data;\r\n\r\n        setTransactions([\r\n            ...transactions,\r\n            transaction,\r\n        ])\r\n    }\r\n\r\n    return (\r\n       <TransactionsContext.Provider value={{ transactions, createTransaction }}>\r\n            {children}\r\n       </TransactionsContext.Provider> \r\n    );\r\n}\r\n\r\nexport function useTransactions() {\r\n    const context = useContext(TransactionsContext);\r\n\r\n    return context;\r\n}"],"mappings":"u9BAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,QAAQ,CAAaC,UAAU,KAAQ,OAAO,CACjF,OAASC,GAAG,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAuBtC,GAAM,CAAAC,mBAAmB,cAAGP,aAAa,CACjC,CAAC,CACL,CAAC,CAEL,MAAO,SAAS,CAAAQ,oBAAoBA,CAAAC,IAAA,CAA0C,IAAvC,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC3C,IAAAC,SAAA,CAAwCT,QAAQ,CAAgB,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5DG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IAEpCX,SAAS,CAAC,UAAM,CACZG,GAAG,CAACY,GAAG,CAAC,cAAc,CAAC,CACtBC,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAH,eAAe,CAACG,QAAQ,CAACC,IAAI,CAACL,YAAY,CAAC,GAAC,CAClE,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQ,CAAAM,iBAAiBA,CAAAC,EAAA,SAAAC,kBAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,mBAAA,EAAAA,kBAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAhC,SAAAC,QAAiCC,gBAAkC,MAAAX,QAAA,CAAAY,WAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACxC,CAAA/B,GAAG,CAACgC,IAAI,CAAC,eAAe,CAAAC,aAAA,CAAAA,aAAA,IACxCR,gBAAgB,MACnBS,SAAS,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,EACvB,CAAC,QAHIrB,QAAQ,CAAAe,QAAA,CAAAO,IAAA,CAKNV,WAAW,CAAKZ,QAAQ,CAACC,IAAI,CAA7BW,WAAW,CAEnBf,eAAe,IAAA0B,MAAA,CAAAC,kBAAA,CACR5B,YAAY,GACfgB,WAAW,EACd,CAAC,yBAAAG,QAAA,CAAAU,IAAA,MAAAf,OAAA,GACL,UAAAN,kBAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,mBACGlB,IAAA,CAACC,mBAAmB,CAACqC,QAAQ,EAACC,KAAK,CAAE,CAAE/B,YAAY,CAAZA,YAAY,CAAEM,iBAAiB,CAAjBA,iBAAkB,CAAE,CAAAV,QAAA,CACnEA,QAAQ,CACgB,CAAC,CAEtC,CAEA,MAAO,SAAS,CAAAoC,eAAeA,CAAA,CAAG,CAC9B,GAAM,CAAAC,OAAO,CAAG5C,UAAU,CAACI,mBAAmB,CAAC,CAE/C,MAAO,CAAAwC,OAAO,CAClB"},"metadata":{},"sourceType":"module","externalDependencies":[]}